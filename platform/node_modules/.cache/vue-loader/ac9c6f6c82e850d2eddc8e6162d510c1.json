{"remainingRequest":"D:\\Learning_platform-master\\platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Learning_platform-master\\platform\\src\\views\\register.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Learning_platform-master\\platform\\src\\views\\register.vue","mtime":1750727594666},{"path":"D:\\Learning_platform-master\\platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Learning_platform-master\\platform\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Learning_platform-master\\platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Learning_platform-master\\platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWY29kZSBmcm9tICJ2dWUtcHV6emxlLXZjb2RlIjsKaW1wb3J0IHsgc2VuZEVtYWlsQ29kZSwgcmVnaXN0ZXIgfSBmcm9tICJAL2FwaS9tb2R1bGVzL3VzZXIiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJyZWdpc3RlciIsCiAgZGF0YSgpIHsKICAgIGNvbnN0IGNoZWNrTGVuZ3RoID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCLnlKjmiLflkI3kuI3og73kuLrnqboiKSk7CiAgICAgIHZhbHVlLmxlbmd0aCA+PSA1ID8gY2FsbGJhY2soKSA6IGNhbGxiYWNrKG5ldyBFcnJvcigi6ZW/5bqm5LiN6IO95bCP5LqONSIpKTsKICAgIH07CgogICAgY29uc3QgY2hlY2tQYXNzd29yZCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigi5a+G56CB5LiN6IO95Li656m6IikpOwogICAgICB2YWx1ZS5sZW5ndGggPj0gNSA/IGNhbGxiYWNrKCkgOiBjYWxsYmFjayhuZXcgRXJyb3IoIumVv+W6puS4jeiDveWwj+S6jjbkvY0iKSk7CiAgICB9OwoKICAgIGNvbnN0IGNoZWNrUGFzc3dvcmRBZ2FpbiA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgY29uc3QgcGFzc3dvcmQgPSB0aGlzLiRyZWZzLnBhc3N3b3JkLnZhbHVlOwogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCLnoa7orqTlr4bnoIHkuI3og73kuLrnqboiKSk7CiAgICAgIHZhbHVlICE9PSBwYXNzd29yZAogICAgICAgICAgPyBjYWxsYmFjayhuZXcgRXJyb3IoIuS4pOasoei+k+WFpeWvhueggeS4jeS4gOiHtCIpKQogICAgICAgICAgOiBjYWxsYmFjaygpOwogICAgfTsKCiAgICBjb25zdCB1c2VyRW1haWwgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGNvbnN0IG1haWxSZWcgPSAvXihbYS16QS1aMC05Xy1dKStAKFthLXpBLVowLTlfLV0pKyguW2EtekEtWjAtOV8tXSkrLzsKICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigi6YKu566x5LiN6IO95Li656m6IikpOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBtYWlsUmVnLnRlc3QodmFsdWUpCiAgICAgICAgICAgID8gY2FsbGJhY2soKQogICAgICAgICAgICA6IGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5q2j56Gu55qE6YKu566x5qC85byPIikpOwogICAgICB9LCAxMDApOwogICAgfTsKCiAgICByZXR1cm4gewogICAgICByZWdpc3RlckZvcm06IHsKICAgICAgICB1c2VybmFtZTogIiIsCiAgICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICAgIHBhc3N3b3JkQWdhaW46ICIiLAogICAgICAgIGVtYWlsOiAiIiwKICAgICAgICBlbWFpbENvZGU6ICIiLAogICAgICAgIGV0Yzoge30KICAgICAgfSwKICAgICAgcmVnaXN0ZXJSdWxlczogewogICAgICAgIHVzZXJuYW1lOiB7IHZhbGlkYXRvcjogY2hlY2tMZW5ndGgsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgIHBhc3N3b3JkOiB7IHZhbGlkYXRvcjogY2hlY2tQYXNzd29yZCwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgcGFzc3dvcmRBZ2FpbjogeyB2YWxpZGF0b3I6IGNoZWNrUGFzc3dvcmRBZ2FpbiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgZW1haWw6IHsgdmFsaWRhdG9yOiB1c2VyRW1haWwsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgIGVtYWlsQ29kZTogewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6aqM6K+B56CB5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH0KICAgICAgfSwKICAgICAgaXNTaG93OiBmYWxzZSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHBhc3N3b3JkVHlwZTogInBhc3N3b3JkIiwKICAgICAgcmVkaXJlY3Q6IHVuZGVmaW5lZCwKICAgICAgdGltZTogMCwKICAgICAgYnRudHh0OiAi6I635Y+W6aqM6K+B56CBIiwKICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICB0eXBlOiAiMCIsCiAgICAgIC8vIOiDjOaZr+Wbvue7keWumuaWueW8jwogICAgICBiYWNrZ3JvdW5kU3R5bGU6IHsKICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoJHtyZXF1aXJlKCdAL2Fzc2V0cy9iYWNrZ3JvdW5kLnBuZycpfSlgLAogICAgICAgIHdpZHRoOiAiMTAwJSIsCiAgICAgICAgcG9zaXRpb246ICJmaXhlZCIsCiAgICAgICAgaGVpZ2h0OiAiMTAwJSIsCiAgICAgICAgdG9wOiAiOTBweCIsCiAgICAgICAgbGVmdDogIjBweCIsCiAgICAgICAgYmFja2dyb3VuZFNpemU6ICJjb3ZlciIsCiAgICAgICAgYmFja2dyb3VuZFJlcGVhdDogIm5vLXJlcGVhdCIKICAgICAgfQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFZjb2RlCiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVSZWdpc3RlcigpIHsKICAgICAgdGhpcy4kcmVmcy5yZWdpc3RlckZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuaXNTaG93ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHN1Y2Nlc3MoKSB7CiAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5ldGMgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgZW1haWxDb2RlOiB0aGlzLnJlZ2lzdGVyRm9ybS5lbWFpbENvZGUKICAgICAgfSk7CgogICAgICByZWdpc3Rlcih0aGlzLnJlZ2lzdGVyRm9ybSkKICAgICAgICAgIC50aGVuKHJlc3AgPT4gewogICAgICAgICAgICB0aGlzLnRvYXN0KHJlc3AuZGF0YS5tZXNzYWdlLCAxKTsKICAgICAgICAgICAgdGhpcy5uYXZpZ2F0b3IoIi9sb2dpbiIpOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChkYXRhID0+IHsKICAgICAgICAgICAgdGhpcy50b2FzdChkYXRhLCAyKTsKICAgICAgICAgIH0pOwogICAgfSwKICAgIGNsb3NlKCkgewogICAgICB0aGlzLmlzU2hvdyA9IGZhbHNlOwogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBnZXRFbWFpbENvZGUoKSB7CiAgICAgIHRoaXMuJHJlZnMucmVnaXN0ZXJGb3JtLnZhbGlkYXRlRmllbGQoImVtYWlsIiwgZXJyID0+IHsKICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgdGhpcy50aW1lID0gNjA7CiAgICAgICAgICB0aGlzLnRpbWVyKCk7CiAgICAgICAgICB0aGlzLnR5cGUgPSAwOwogICAgICAgICAgc2VuZEVtYWlsQ29kZSh7IGVtYWlsOiB0aGlzLnJlZ2lzdGVyRm9ybS5lbWFpbCwgdHlwZTogdGhpcy50eXBlIH0pCiAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnRvYXN0KHJlc3AuZGF0YS5tZXNzYWdlLCAxKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaChkYXRhID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudG9hc3QoZGF0YSwgMik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB0aW1lcigpIHsKICAgICAgaWYgKHRoaXMudGltZSA+IDApIHsKICAgICAgICB0aGlzLnRpbWUtLTsKICAgICAgICB0aGlzLmJ0bnR4dCA9IHRoaXMudGltZSArICJz5ZCO6YeN5paw6I635Y+WIjsKICAgICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICBzZXRUaW1lb3V0KHRoaXMudGltZXIsIDEwMDApOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudGltZSA9IDA7CiAgICAgICAgdGhpcy5idG50eHQgPSAi6I635Y+W6aqM6K+B56CBIjsKICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBiYWNrMmxvZ2luKCkgewogICAgICB0aGlzLm5hdmlnYXRvcigiL2xvZ2luIik7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"register.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <!-- 顶部标题 -->\n    <div\n        style=\"background-color: #f7f7f7; display: flex; justify-content: center; align-items: center; height: 90px;\"\n    >\n      <span class=\"til\">大连理工大学在线教育平台</span>\n    </div>\n\n    <!-- 背景图绑定 -->\n    <div :style=\"backgroundStyle\"></div>\n\n    <div class=\"myLoginUI\">\n      <el-card class=\"box-card\">\n        <h1 class=\"h1\">注册</h1>\n        <el-form\n            ref=\"registerForm\"\n            :model=\"registerForm\"\n            :rules=\"registerRules\"\n            class=\"register-form\"\n            autocomplete=\"on\"\n            label-position=\"left\"\n        >\n          <el-form-item class=\"register-form-item\" prop=\"username\">\n            <el-input\n                ref=\"username\"\n                v-model=\"registerForm.username\"\n                placeholder=\"请输入用户名\"\n                name=\"username\"\n                type=\"text\"\n                tabindex=\"1\"\n                autocomplete=\"on\"\n                prefix-icon=\"el-icon-user\"\n            />\n          </el-form-item>\n\n          <el-form-item class=\"register-form-item\" prop=\"password\">\n            <el-input\n                :key=\"passwordType\"\n                ref=\"password\"\n                v-model=\"registerForm.password\"\n                placeholder=\"请输入密码\"\n                name=\"password\"\n                :type=\"passwordType\"\n                tabindex=\"2\"\n                autocomplete=\"on\"\n                prefix-icon=\"el-icon-lock\"\n            />\n          </el-form-item>\n\n          <el-form-item class=\"register-form-item\" prop=\"passwordAgain\">\n            <el-input\n                :key=\"passwordType\"\n                ref=\"passwordAgain\"\n                v-model=\"registerForm.passwordAgain\"\n                placeholder=\"请确认密码\"\n                name=\"passwordAgain\"\n                :type=\"passwordType\"\n                tabindex=\"3\"\n                autocomplete=\"on\"\n                prefix-icon=\"el-icon-lock\"\n            />\n          </el-form-item>\n\n          <el-form-item prop=\"email\">\n            <el-input\n                ref=\"email\"\n                v-model=\"registerForm.email\"\n                placeholder=\"请输入邮箱\"\n                name=\"email\"\n                type=\"text\"\n                tabindex=\"4\"\n                autocomplete=\"on\"\n                prefix-icon=\"el-icon-message\"\n            />\n          </el-form-item>\n\n          <el-form-item prop=\"emailCode\">\n            <el-input\n                ref=\"emailCode\"\n                v-model=\"registerForm.emailCode\"\n                placeholder=\"请输入邮箱验证码\"\n                name=\"emailCode\"\n                type=\"text\"\n                tabindex=\"5\"\n                autocomplete=\"on\"\n                prefix-icon=\"el-icon-chat-dot-square\"\n                style=\"width: 67%; float: left;\"\n            />\n            <el-button\n                type=\"primary\"\n                plain\n                style=\"float: right\"\n                :disabled=\"disabled\"\n                @click=\"getEmailCode()\"\n            >{{btntxt}}</el-button>\n          </el-form-item>\n\n          <el-button\n              :loading=\"loading\"\n              type=\"primary\"\n              style=\"width:100%;margin-bottom:20px;\"\n              @click.native.prevent=\"handleRegister\"\n          >注册</el-button>\n        </el-form>\n\n        <span class=\"back2login\" @click=\"back2login\">返回登录</span>\n\n        <Vcode :show=\"isShow\" @success=\"success\" @close=\"close\" />\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Vcode from \"vue-puzzle-vcode\";\nimport { sendEmailCode, register } from \"@/api/modules/user\";\n\nexport default {\n  name: \"register\",\n  data() {\n    const checkLength = (rule, value, callback) => {\n      if (!value) return callback(new Error(\"用户名不能为空\"));\n      value.length >= 5 ? callback() : callback(new Error(\"长度不能小于5\"));\n    };\n\n    const checkPassword = (rule, value, callback) => {\n      if (!value) return callback(new Error(\"密码不能为空\"));\n      value.length >= 5 ? callback() : callback(new Error(\"长度不能小于6位\"));\n    };\n\n    const checkPasswordAgain = (rule, value, callback) => {\n      const password = this.$refs.password.value;\n      if (!value) return callback(new Error(\"确认密码不能为空\"));\n      value !== password\n          ? callback(new Error(\"两次输入密码不一致\"))\n          : callback();\n    };\n\n    const userEmail = (rule, value, callback) => {\n      const mailReg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;\n      if (!value) return callback(new Error(\"邮箱不能为空\"));\n      setTimeout(() => {\n        mailReg.test(value)\n            ? callback()\n            : callback(new Error(\"请输入正确的邮箱格式\"));\n      }, 100);\n    };\n\n    return {\n      registerForm: {\n        username: \"\",\n        password: \"\",\n        passwordAgain: \"\",\n        email: \"\",\n        emailCode: \"\",\n        etc: {}\n      },\n      registerRules: {\n        username: { validator: checkLength, trigger: \"blur\" },\n        password: { validator: checkPassword, trigger: \"blur\" },\n        passwordAgain: { validator: checkPasswordAgain, trigger: \"blur\" },\n        email: { validator: userEmail, trigger: \"blur\" },\n        emailCode: {\n          required: true,\n          message: \"验证码不能为空\",\n          trigger: \"blur\"\n        }\n      },\n      isShow: false,\n      loading: false,\n      passwordType: \"password\",\n      redirect: undefined,\n      time: 0,\n      btntxt: \"获取验证码\",\n      disabled: false,\n      type: \"0\",\n      // 背景图绑定方式\n      backgroundStyle: {\n        backgroundImage: `url(${require('@/assets/background.png')})`,\n        width: \"100%\",\n        position: \"fixed\",\n        height: \"100%\",\n        top: \"90px\",\n        left: \"0px\",\n        backgroundSize: \"cover\",\n        backgroundRepeat: \"no-repeat\"\n      }\n    };\n  },\n  components: {\n    Vcode\n  },\n  methods: {\n    handleRegister() {\n      this.$refs.registerForm.validate(valid => {\n        if (valid) {\n          this.loading = true;\n          this.isShow = true;\n        }\n      });\n    },\n    success() {\n      this.isShow = false;\n      this.loading = false;\n      this.registerForm.etc = JSON.stringify({\n        emailCode: this.registerForm.emailCode\n      });\n\n      register(this.registerForm)\n          .then(resp => {\n            this.toast(resp.data.message, 1);\n            this.navigator(\"/login\");\n          })\n          .catch(data => {\n            this.toast(data, 2);\n          });\n    },\n    close() {\n      this.isShow = false;\n      this.loading = false;\n    },\n    getEmailCode() {\n      this.$refs.registerForm.validateField(\"email\", err => {\n        if (!err) {\n          this.time = 60;\n          this.timer();\n          this.type = 0;\n          sendEmailCode({ email: this.registerForm.email, type: this.type })\n              .then(resp => {\n                this.toast(resp.data.message, 1);\n              })\n              .catch(data => {\n                this.toast(data, 2);\n              });\n        }\n      });\n    },\n    timer() {\n      if (this.time > 0) {\n        this.time--;\n        this.btntxt = this.time + \"s后重新获取\";\n        this.disabled = true;\n        setTimeout(this.timer, 1000);\n      } else {\n        this.time = 0;\n        this.btntxt = \"获取验证码\";\n        this.disabled = false;\n      }\n    },\n    back2login() {\n      this.navigator(\"/login\");\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.til {\n  color: #2d73cc;\n  font-weight: bolder;\n  font-size: 60px;\n}\n\n.back2login {\n  cursor: pointer;\n  color: #298adb;\n  float: right;\n  padding-bottom: 30px;\n  font-size: 18px;\n}\n\n.box-card {\n  margin: 0 auto;\n  width: 480px;\n}\n\n.myLoginUI {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin: -280px 0 0 -240px;\n  width: 480px;\n}\n</style>\n"]}]}